var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define(["underscore","backbone","collections/placer/requestList","models/placer/request","common/socket"],function(e,t,n,r,i){var s;return s=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return __extends(n,t),n.prototype.el="#placer",n.prototype.template="#request_list_li",n.prototype.events={"click #add_request_btn":"openRequestModel","click #add_request_modal .save_btn":"clickModelSaveBtn"},n.prototype.initialize=function(){return console.log("placerView.initialize"),this.modal=this.$el.find("#add_request_modal"),i.on("send:message",e.bind(this.receiveMessage,this))},n.prototype.openRequestModel=function(){return console.log("placerView.clickOpenModel"),this.modal.modal().find("textarea").val(""),setTimeout(e.bind(function(){return this.modal.find("textarea").focus()},this),1e3)},n.prototype.clickModelSaveBtn=function(){var e,t;return console.log("placerView.clickModelSaveBtn"),t=this.modal.find("textarea").val(),e=new r({originalText:t,placer:App.model.user.get("userName"),status:"wait"}),e.set("requestId",""+App.model.user.get("id")+e.cid),this.collection.add(e),this.render(),this.modal.modal("hide"),i.emit("send:message",e.attributes)},n.prototype.receiveMessage=function(e){var t;console.log("placerView.receiveMessage"),console.log("=================");if(e.placer===App.model.user.get("userName"))return t=this.collection.where({requestId:e.requestId}),t.length>0?t[0].set(e):this.collection.add(new r(e)),this.render()},n.prototype.render=function(){var t;return t=this.$el.find(this.template).text(),this.$el.find("#request_list_section").empty().append(e.template(t,{requests:this.collection.toJSON()}))},n.prototype.show=function(){return this.$el.hide().removeClass("hide").fadeIn("normal")},n.prototype.hide=function(){return this.$el.hide()},n}(t.View)})